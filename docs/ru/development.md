<img src="https://capsule-render.vercel.app/api?type=waving&color=gradient&customColorList=12,16,20&height=120&section=header&text=–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞&fontSize=40&animation=fadeIn"/>

<div align="center">

[![Alembic](https://img.shields.io/badge/Migrations-Alembic-blue?style=for-the-badge)](https://alembic.sqlalchemy.org/)
[![CI/CD](https://img.shields.io/badge/Pipeline-GitHub%20Actions-green?style=for-the-badge&logo=github)](https://github.com/features/actions)
[![Dev Tools](https://img.shields.io/badge/Tools-Complete-orange?style=for-the-badge)](#–º–∏–≥—Ä–∞—Ü–∏–∏-–±–∞–∑—ã-–¥–∞–Ω–Ω—ã—Ö)

</div>

## üìã –û —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–µ

> [!IMPORTANT]
> –ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ dev-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: `pip install -e .[dev]`

## üóÑÔ∏è –ú–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —É–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ Alembic –ø–æ–≤–µ—Ä—Ö SQLite.

### –ö–∞–∫ –ø–æ–¥–Ω–∏–º–∞–µ—Ç—Å—è —Å—Ö–µ–º–∞

–í–æ –≤—Ä–µ–º—è –∑–∞–ø—É—Å–∫–∞ —Å—Ö–µ–º–∞ –ë–î —Å–æ–∑–¥–∞–µ—Ç—Å—è –∏–ª–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ –≤—ã–∑–æ–≤ `backend.storage.db.init_db()`.
–≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –≤–Ω—É—Ç—Ä–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∫–æ–º–∞–Ω–¥—É:

```powershell
python -m alembic -c backend/alembic.ini upgrade head
```

–õ—é–±–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞, –∫–æ—Ç–æ—Ä–∞—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö, –¥–æ–ª–∂–Ω–∞ –æ–¥–∏–Ω —Ä–∞–∑ –≤—ã–∑–≤–∞—Ç—å `init_db()` –ø–µ—Ä–µ–¥ —Ä–∞–±–æ—Ç–æ–π —Å–æ —Å—Ç–æ—Ä–µ–¥–∂–µ–º.

### –ó–∞–ø—É—Å–∫ –º–∏–≥—Ä–∞—Ü–∏–π –ª–æ–∫–∞–ª—å–Ω–æ

–ß—Ç–æ–±—ã –ª–æ–∫–∞–ª—å–Ω–∞—è –±–∞–∑–∞ –±—ã–ª–∞ –≤ –∞–∫—Ç—É–∞–ª—å–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å:

```powershell
python -m alembic -c backend/alembic.ini upgrade head
```

–ú–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–∏–º–µ–Ω—è—Ç—Å—è –∫ —Ñ–∞–π–ª—É –±–∞–∑—ã, –ø—É—Ç—å –∫ –∫–æ—Ç–æ—Ä–æ–º—É –∑–∞–¥–∞–Ω –≤ `backend.storage.db.DB_PATH`.

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏

–ï—Å–ª–∏ –≤—ã –º–µ–Ω—è–µ—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü, –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é.

–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–æ—Ä—è–¥–æ–∫ –¥–µ–π—Å—Ç–≤–∏–π:

1. –ù–µ –ø—Ä–∞–≤–∏—Ç—å SQL –≤ –∫–æ–¥–µ –Ω–∞–ø—Ä—è–º—É—é. –°–Ω–∞—á–∞–ª–∞ —Å–æ–∑–¥–∞–π—Ç–µ –º–∏–≥—Ä–∞—Ü–∏—é.

2. –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∑–∞–≥–æ—Ç–æ–≤–∫—É –º–∏–≥—Ä–∞—Ü–∏–∏:

   ```powershell
   python -m alembic revision -m "–æ–ø–∏—Å–∞–Ω–∏–µ_–∏–∑–º–µ–Ω–µ–Ω–∏—è"
   ```

3. –û—Ç–∫—Ä—ã—Ç—å —Ñ–∞–π–ª –∏–∑ `backend/alembic/versions/` –∏ –≤—Ä—É—á–Ω—É—é –æ–ø–∏—Å–∞—Ç—å SQL –≤ —Ñ—É–Ω–∫—Ü–∏—è—Ö `upgrade` –∏ `downgrade` –ø–æ–¥ SQLite.

4. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é:

   ```powershell
   python -m alembic -c backend/alembic.ini upgrade head
   ```

–î–ª—è SQLite –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å—Ö–µ–º—ã –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∞, –ø–æ—ç—Ç–æ–º—É –º–∏–≥—Ä–∞—Ü–∏–∏ –æ–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤—Ä—É—á–Ω—É—é.

### –ú–∏–≥—Ä–∞—Ü–∏–∏ –∏ —Ç–µ—Å—Ç—ã

–¢–µ—Å—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö, —Ä–∞–±–æ—Ç–∞—é—Ç —Å —Ç–µ–º–∏ –∂–µ –º–∏–≥—Ä–∞—Ü–∏—è–º–∏:

* –í —Ç–µ—Å—Ç–µ –º–æ–∂–Ω–æ –ø–æ–¥–º–µ–Ω–∏—Ç—å `backend.storage.db.DB_PATH` –Ω–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã–π —Ñ–∞–π–ª.

* –í—ã–∑–æ–≤ `backend.storage.db.init_db()` –ø—Ä–∏–º–µ–Ω–∏—Ç –≤—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –∫ —ç—Ç–æ–π –≤—Ä–µ–º–µ–Ω–Ω–æ–π –±–∞–∑–µ.

–¢–∞–∫ —Ç–µ—Å—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞ –≤—Å–µ–≥–¥–∞ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –±–æ–µ–≤–æ–π.

### Docker –∏ –º–∏–≥—Ä–∞—Ü–∏–∏

–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –±–æ—Ç–∞ –≤ Docker –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –¥–æ —Å—Ç–∞—Ä—Ç–∞ –ø—Ä–æ—Ü–µ—Å—Å–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

–¢–∏–ø–∏—á–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω ‚Äî –∑–∞–ø—É—Å–∫–∞—Ç—å:

```powershell
python -m alembic -c backend/alembic.ini upgrade head
python bot.py
```

–∏–∑ entrypoint-—Å–∫—Ä–∏–ø—Ç–∞.

### CI –ø–∞–π–ø–ª–∞–π–Ω

–í GitHub Actions –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —à–∞–≥–∏:

1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ dev-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∏ –ø–∞–∫–µ—Ç–∞ –≤ editable-—Ä–µ–∂–∏–º–µ:

   ```powershell
   python -m pip install -e .[dev]
   ```

2. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π Alembic:

   ```powershell
   python -m alembic -c backend/alembic.ini upgrade head
   ```

3. –ó–∞–ø—É—Å–∫ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫ –∏ —Ç–µ—Å—Ç–æ–≤:

   ```powershell
   python -m ruff check .
   python -m mypy backend/
   python -m pytest
   ```
