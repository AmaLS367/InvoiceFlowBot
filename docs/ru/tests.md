# üß™ –¢–µ—Å—Ç—ã

–ü—Ä–æ–µ–∫—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç pytest. –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è —Ç–µ—Å—Ç–æ–≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –≤ `pyproject.toml` –≤ —Å–µ–∫—Ü–∏–∏ `[project.optional-dependencies]`.

> [!NOTE]
> –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ dev-–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: `pip install -e .[dev]`

## üöÄ –ó–∞–ø—É—Å–∫

```powershell
git clone https://github.com/AmaLS367/InvoiceFlowBot.git
cd InvoiceFlowBot
python -m venv .venv
.\.venv\Scripts\Activate.ps1
pip install -e .[dev]
pytest
```

–ö–æ–º–∞–Ω–¥–∞ `pytest` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–∞—Ä—É–∂–∏—Ç —Ç–µ—Å—Ç—ã –≤ –∫–∞—Ç–∞–ª–æ–≥–µ `tests/`.

## –ü–æ–∫—Ä—ã—Ç–∏–µ

- `test_invoice_parsing.py` ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –æ—Ç–≤–µ—Ç–∞ Mindee –≤ –≤–Ω—É—Ç—Ä–µ–Ω–Ω—é—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É.
- `test_engine_utilities.py` ‚Äî –≤–∞–ª–∏–¥–∞—Ü–∏—è —É—Ç–∏–ª–∏—Ç OCR-–¥–≤–∏–∂–∫–∞ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è.
- `test_storage_dates.py` ‚Äî –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –¥–∞—Ç, ISO —Ñ–æ—Ä–º–∞—Ç—ã –∏ –≤—ã–±–æ—Ä–∫–∏ –∏–∑ –ë–î.
- `test_imports.py` ‚Äî –±—ã—Å—Ç—Ä—ã–π smoke-—Ç–µ—Å—Ç –∏–º–ø–æ—Ä—Ç–∞ –∫–ª—é—á–µ–≤—ã—Ö –º–æ–¥—É–ª–µ–π.
- `test_invoice_service.py` ‚Äî —Ç–µ—Å—Ç—ã —Å–µ—Ä–≤–∏—Å–Ω–æ–≥–æ —Å–ª–æ—è —Å –∑–∞–º–æ–∫–∞–Ω–Ω—ã–º–∏ OCR –∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ–º:
  - `process_invoice_file` ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ OCR –∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ –≤ –¥–æ–º–µ–Ω–Ω—É—é –º–æ–¥–µ–ª—å
  - `save_invoice` –∏ `list_invoices` ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –≤ —Å–ª–æ–π —Ö—Ä–∞–Ω–∏–ª–∏—â–∞

## –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞

–í –ø—Ä–æ–µ–∫—Ç–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–∞—á–µ—Å—Ç–≤–∞ –∫–æ–¥–∞:

- **ruff** ‚Äî –±—ã—Å—Ç—Ä—ã–π –ª–∏–Ω—Ç–µ—Ä Python –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∏–ª—è –∫–æ–¥–∞ –∏ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –æ—à–∏–±–æ–∫
- **mypy** ‚Äî —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤ –¥–ª—è Python

### –ó–∞–ø—É—Å–∫ –ø—Ä–æ–≤–µ—Ä–æ–∫ –∫–∞—á–µ—Å—Ç–≤–∞

```powershell
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
pip install -e .[dev]

# –ó–∞–ø—É—Å–∫ –ª–∏–Ω—Ç–µ—Ä–∞
python -m ruff check .

# –ó–∞–ø—É—Å–∫ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–∏–ø–æ–≤
python -m mypy domain services ocr storage

# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
python -m pytest
```

–¢–∞–∫–∂–µ –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ñ–∞–π–ª —Å —Ç–µ—Å—Ç–∞–º–∏:

```powershell
python -m pytest tests/test_invoice_service.py
```

CI-–ø–∞–π–ø–ª–∞–π–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç `ruff`, `mypy` –∏ `pytest` –ø—Ä–∏ –∫–∞–∂–¥–æ–º push –∏ pull request.

## –ü–æ–ª–∏—Ç–∏–∫–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

- –ù–æ–≤—ã–µ —Ñ–∏—á–∏ –∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ —Å–æ–ø—Ä–æ–≤–æ–∂–¥–∞—Ç—å —Ç–µ—Å—Ç–∞–º–∏, –æ—Å–æ–±–µ–Ω–Ω–æ –µ—Å–ª–∏ –º–µ–Ω—è—é—Ç—Å—è —Ñ–æ—Ä–º–∞—Ç—ã –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ –ª–æ–≥–∏–∫–∞ OCR.
- –ü–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π Pull Request –ø—Ä–æ–≥–æ–Ω—è–π—Ç–µ `pytest` –ª–æ–∫–∞–ª—å–Ω–æ –∏–ª–∏ –≤ CI.
- –î–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∫–µ–π—Å–æ–≤ Mindee –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å —Ñ–∏–∫—Å—Ç—É—Ä—ã —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –ø—Ä–∏–º–µ—Ä–∞–º–∏ PDF (–æ–±–µ–∑–ª–∏—á–µ–Ω–Ω—ã–º–∏).
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∫–æ–¥ –ø—Ä–æ—Ö–æ–¥–∏—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ `ruff` –∏ `mypy` –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π pull request.
