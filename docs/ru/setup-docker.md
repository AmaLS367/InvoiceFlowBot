# Запуск через Docker

Docker позволяет развернуть InvoiceFlowBot без локальной установки Python и зависимостей. Контейнер содержит все нужные пакеты, а на хост монтируются только база и логи.

## Подготовка

1. Скопируйте настройки:
```powershell
Copy-Item .env.example .env
notepad .env
```

2. Убедитесь, что файл `data.sqlite` существует и именно файл, а не директория. На Windows при отсутствии файла Docker может создать папку с таким именем. Если это произошло, удалите папку и пересоздайте пустой файл:
```powershell
Remove-Item .\data.sqlite -Recurse -Force
New-Item .\data.sqlite -ItemType File | Out-Null
```

## Запуск контейнера

```powershell
docker-compose up --build -d
```
- `--build` гарантирует пересборку образа при обновлениях зависимостей.
- `-d` запускает стек в фоне.

## Остановка и обновление

Остановить сервис:
```powershell
docker-compose down
```

Получить свежую версию и пересобрать:
```powershell
git pull
docker-compose up --build -d
```

## Томы и данные

Файл `docker-compose.yml` монтирует ресурсы:
- `./data.sqlite:/app/data.sqlite` — база счетов. Держите ее в бэкапах.
- `./logs:/app/logs` — логи OCR и ошибок доступны на хосте.

Логи и база сохраняются между рестартами контейнера, поэтому перед обновлениями достаточно сделать резервную копию этих путей.

