# Конфигурация

Все настройки InvoiceFlowBot поступают из переменных окружения. При запуске `config.py` загружает `.env` и считывает значения через `os.getenv`, поэтому достаточно обновить файл и перезапустить процесс или контейнер.

## Обязательные параметры

| Переменная | Назначение | Допустимые значения | Значение по умолчанию |
| --- | --- | --- | --- |
| `BOT_TOKEN` | Токен Telegram бота, используемый Aiogram для подключения | Строка из @BotFather | отсутствует, без значения бот не стартует |
| `MINDEE_API_KEY` | Ключ Mindee API для доступа к сервису OCR | Ключ API из кабинета Mindee (https://platform.mindee.com/) | отсутствует, без значения бот не стартует |
| `MINDEE_MODEL_ID` | Идентификатор модели Mindee, которая используется для распознавания инвойсов | ID модели из платформы Mindee (например, `mindee/invoices/v4` или UUID пользовательской модели) | отсутствует, без значения бот не стартует |

Эти переменные обязательны. Если они не заданы, приложение завершит работу при запуске с понятной ошибкой.

## Опциональные параметры

| Переменная | Назначение | Допустимые значения | Значение по умолчанию |
| --- | --- | --- | --- |
| `INVOICE_DB_PATH` | Путь к файлу SQLite с данными | Любой валидный путь на хосте или в контейнере | `data.sqlite` |
| `LOG_LEVEL` | Уровень логирования (используется при настройке корневого логгера) | `DEBUG`, `INFO`, `WARNING`, `ERROR`, `CRITICAL` | `INFO` |
| `LOG_ROTATE_MB` | Размер файла лога до ротации | Целое число мегабайт | `10` |
| `LOG_BACKUPS` | Количество ротационных копий логов | Целое число | `5` |
| `LOG_CONSOLE` | Выводить ли логи в консоль | `0` или `1` (а также `true`/`True`) | `0` |
| `LOG_DIR` | Пользовательский путь к каталогу логов | Строка с абсолютным или относительным путем | `logs` в корне проекта |

Если `LOG_DIR` не задан, `ocr/engine/util.py` создаст каталог `logs/` рядом с исходниками и развернет обработчики `ocr_engine.log`, `errors.log`, `router.log`, `extract.log`.

## Работа с `.env`

- Держите `.env` вне системы контроля версий. Файл `.env.example` служит шаблоном и не содержит секретов.
- После обновления `.env` локальный процесс необходимо перезапустить. В Docker достаточно пересоздать контейнер через `docker-compose up -d` или `docker-compose restart`.
- Для разных окружений (dev, staging, prod) используйте отдельные файлы `.env` с нужными токенами и путями к базе.

